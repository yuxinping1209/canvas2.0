<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>canvas2.0</title>
	<link rel="stylesheet" href="./style.css">
</head>
<body>
<canvas id='a'></canvas>
<button id="eraser">橡皮擦</button>
<script>
	var canvas = document.getElementById('a')
	var context = canvas.getContext('2d')
	var using = false

	//画一个矩形
	context.fillStyle ='red'//填充样式
	context.fillRect(0,0,10,10)//填充的坐标及大小
	context.strokeStyle ='red'//描边的颜色
    context.strokeRect(0,0,10,10)//边框的坐标及大小
    context.clearRect(0,0,5,5)//清空内容
    //画一个三角形
    context.beginPath()//开始路径
    context.moveTo(50,50)//从这点移动
    context.lineTo(80,80)//走到这
    context.lineTo(50,80)//再走到这就闭合了
    context.fill()//很重要的要填充，填充的颜色根据最后的命令执行，上一个矩形的红色
    //画圆形
    context.beginPath()//除了矩形之外，都要开始路径
    context.arc(150,120,20,0,Math.PI*2)//(圆形坐标x,圆形坐标y,半径,从0开始,终止的弧度，用PI表示，默认顺时针)
    context.fill()

    var lastPoint = {x:undefined,y:undefined}
    resize()
    window.onresize = function(){
        resize()  
    }
    function resize(){
        var pageWidth = document.documentElement.clientWidth
        var pageHeight =document.documentElement.clientHeight
        canvas.width = pageWidth
        canvas.height = pageHeight
    }

    function drawCircle(x,y,radius){
    	context.beginPath()
    	context.arc(x,y,radius,0,Math.PI*2)
    	context.fill()
    }
    function drawLine(x1,y1,x2,y2){
    	context.beginPath()
    	context.lineWidth = 4
    	context.moveTo(x1,y1)
    	context.lineTo(x2,y2)
    	context.stroke()
    	context.closePath()
    }
    
    canvas.onmousedown = function(aaa){

    	var x = aaa.clientX
    	var y = aaa.clientY
        if(eraserEnabled){
            using = true
            context.clearRect(x,y,10,10)

        }else{
    	    using = true
            lastPoint = {x:x,y:y}
    	    drawCircle(x,y,2)
        }
    }
    canvas.onmousemove = function(aaa){
        var x = aaa.clientX
        var y = aaa.clientY
    	if (eraserEnabled) {
            if (using) {
               context.clearRect(x,y,10,10) 
            }
        
        }else{
            if(using){
        var newPoint={x:x,y:y}
        drawCircle(x,y,2)
        drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)
        lastPoint = newPoint
        
        }       

        }
        
    }
    canvas.onmouseup = function(aaa){
    	using = false
    }
    var eraserEnabled = false  

    eraser.onclick = function(){
        
        eraserEnabled = !eraserEnabled //当点击橡皮擦的时候就有相反的作用 
    }
    
</script>	
</body>
</html>